<!DOCTYPE html>
<html lang="en">
    <head>
        <script src="https://code.jquery.com/jquery-3.5.0.js">
        </script>
        <meta name="viewport" content="width=400">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="apple-touch-icon" sizes="192X192" href="/img/apple-touch-icon.png">
    </head>
    <body style="width:400px; font-family:verdana;background-color:#cc0000;">
        <div align="center" fontsize=30>
            <p style="font-size:30px"><br><br>Garage Door IS OFFLINE<br></p>
            <p style="font-size:30px">Garage Door is<br></p>
            <div id="status" style="font-size:40px">{{ status }}</div>
            <img id="fred" class="image image-1" src="/img/apple-touch-icon.png" data-src="/img/apple-touch-icon.png"
                   data-hover="/img/invert.png" width=150 height=150>
            <img id="doorbutton" class="image image-2" src="apple-touch-icon.png" data-src="apple-touch-icon.png"
                   data-hover="invert.png" width=150 height=150>

        </div>

        <script>
            $(document).ready(function() {
                $.ajaxSetup({ cache: false });
                setInterval(function() {
                 $('#status').load('status');
               }, 1000);
            });
        </script>
        <script>
           $(".image-1").touchstart(function() {
                $(this).attr('src', $(this).data("hover"));
                $.get('button');
              }).touchend(function() {
                $(this).attr('src', $(this).data("src"));
              });
        </script>
        <script>
            document.getElementById("doorbutton").onmousedown = function() {clickbutton()};
            document.getElementById("doorbutton").touchstart = function() {clickbutton()};
            function clickbutton() {
                document.images[1].src = "invert.png";
                $.get('button');
              };
            document.getElementById("doorbutton").onmouseup = function() {releasebutton()};
            document.getElementById("doorbutton").touchend = function() {releasebutton()};
            function releasebutton() {
                document.images[1].src = "apple-touch-icon.png";
              };
        </script>

    </body>
</html>
